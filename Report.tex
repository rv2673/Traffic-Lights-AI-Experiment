\documentclass[a4paper]{article}

\usepackage[english]{babel}
\usepackage[utf8]{inputenc}
\usepackage{amsmath}
\usepackage{graphicx}
\usepackage{float}
\restylefloat{table}

\title{Improvements and extensions on a Social Simulation.}

\author{prive}

\date{\today}

\begin{document}

\maketitle
\clearpage
\tableofcontents
\clearpage

\section{Introduction}
Short introduction here.

\clearpage

\section{Existing model}
The existing model for this social simulation was written in NetLogo. The goal of the simulation was to discover what the influence of police presence is on the number of red light walkers. The model was created while keeping the following three observations, with regards to red light crossing, in mind:
\begin{itemize}
\item The peer pressure by other pedestrians
\item The possible time gained by crossing a red light
\item The probability of getting caught
\end{itemize}

\subsection{Design}
The world consist out of 33 by 33 patches and wraps around. A road with two traffic lights, one for the pedestrians and one for the cars, is located in this world. The pedestrians move horizontally through the world and due to the wrap around keep crossing the road. The cars on the other hand move along vertical axis over the Within the simulation there are two types of actors: pedestrians and cars. The cars only move down across the road 

\subsection{Simulation}
\label{sec:initialsim}
For the simulation, the following parameters were used for all experiments:
\begin{itemize}
\item Fine: $\$250$
\item Pedestrians: $50$
\item Pedestrian green time: $20$ ticks
\end{itemize}
As well as the following experiment-specific constraints:\\

\begin{tabular}{ r | l | l }
  Exp. & Cars & Car green time (ticks) \\
  \hline
  1 &  0 & 100 \\
  2 & 10 & 100 \\
  3 & 50 & 100 \\
  4 &  0 & 20  \\
  5 & 10 & 20  \\
  6 & 50 & 20  \\
\end{tabular}\\

Running the simulation for $100 000$ ticks, the results were the following:
\begin{table}[H]
\centering
\begin{tabular}{ l | c c c c }
  Police Presence Prob. & 0\% & 33\% & 66\% & 100\% \\ 
  \hline
  Experiment 1 & 3.92 & 2.40 & 0 & 0  \\
  Experiment 2 & 0.15 & 0.03 & 0 & 0  \\
  Experiment 3 & 0    & 0    & 0 & 0  \\
  Experiment 4 & 0.37 & 0    & 0 & 0  \\
  Experiment 5 & 0.15 & 0    & 0 & 0  \\
  Experiment 6 & 0    & 0    & 0 & 0  \\
\end{tabular}
\caption{Average number of times an adaptive 
pedestrian walks through a red light.}
\end{table}

We will reference these results in later chapters.

\clearpage

\section{Changes and their immediate effects}
Changes made to the model, why, and how they directly  affected the simulation.

\subsection{Viewing Distance}
We introduced a 'viewing range' for agents, where they would only be able to look ahead a fixed amount of $patches$ (for cars).

\subsubsection{Motivation}
In the existing simulation, pedestrians would look ahead from their current y position to the y position of the traffic light (top right of the road). This meant different pedestrians looked at portions of the road at different sizes. For example, in figure \ref{ABlabel}, the pedestrian marked $A$ would only look ahead three patches, while the pedestrians marked $B$ would look ahead the entire road.

\begin{figure}[H]
\centering
\caption{Visualization of the simulation.}
\label{ABlabel}
\end{figure}

If a pedestrian would spot cars on the portion of the road it was watching, it would refuse to cross. As a result, even a moderate amount of cars resulted in pedestrians located at the bottom of the road not crossing when the light was red, regardless of their 'type'.

Additionally, pedestrians standing close to the traffic light would only look ahead a few patches, not noticing cars that might be approaching just behind the traffic light.

\subsubsection{Implementation}
We rewrote the pedestrian's logic such that rather than looking ahead until the traffic light, it would look ahead a fixed number of patches. This 'viewing range would also wrap around the world, meaning the viewing range of pedestrians standing near the top of the road also covered part of the bottom of the road.

\subsubsection{Influences on the simulation}
The area between the bottom of the road and the traffic light was 24 patches high. Consequently, the average viewing range of a pedestrian was about 12 patches.

To quantify the influence of this change on the simulation and its results, we set the viewing range to 8 (picked arbitrarily for testing), and ran the simulation with the exact same parameters as in chapter \ref{sec:initialsim}. The results were:

\begin{table}[H]
\centering
\begin{tabular}{ l | c c c c }
  Police Presence Prob. & 0\% & 33\% & 66\% & 100\% \\ 
  \hline
  Experiment 1 & 3.46 & 2.31 & 0 & 0  \\
  Experiment 2 & 1.83 & 1.31 & 0 & 0  \\
  Experiment 3 & 0.54 & 0.27 & 0 & 0  \\
  Experiment 4 & 0.46 & 0    & 0 & 0  \\
  Experiment 5 & 0.50 & 0    & 0 & 0  \\
  Experiment 6 & 0.13 & 0    & 0 & 0  \\
\end{tabular}
\caption{Average number of times an adaptive 
pedestrian walks through a red light.}
\end{table}

The results for experiments 1 and 4, where no cars were on the road, did not change much, as expected. Interestingly, the results for experiments 2, 3, 5 and 6, when more cars were on the road, increased noticably. 

\subsection{More advanced model}
We adapted the movement logic of the pedestrians to arrive at the road spread out from each other and at varying y coordinates.

\subsubsection{Motivation}
When looking at the old model pedestrians would move across the world in a vertical band along the x-axis. This was countered by the slightly random movement speed of the pedestrians, but since the movement was evaluated each tick the resulting difference was minimal. Ultimately all the agents would arrive at the traffic light within a few ticks.

The other aspect, varying the y-coordinate of the pedestrians, was needed to counter the same agent crossing an optimal spot multiple times. After implementing the viewing distance it became clear that crossing the road at the bottom was more profitable since it takes a while before the cars to enter the viewing range of the bottom most pedestrians when the cars' traffic light turns green.
Since it is important for this simulation to keep reusing the same agents, recreating pedestrians anew wasn't an option.

\subsubsection{Implementation}
The implementation of the advanced model was done by creating a "waiting zone" in the world. The first column of patches are colored blue in the simulation to visualize this zone. Once a pedestrian enters this zone it will get a random number of ticks it has to wait and its y-coordinate is randomized.
After the wait time is over the pedestrian will continue its normal movement routine.

\subsubsection{Influences on the simulation}
..

\subsection{Counting methods}
..

\subsubsection{Motivation}
Some of the figures extracted from the old simulation were meaningless. Many of the percentages were calculated by dividing the number of pedestrians that performed certain task, say walking through a red light, by the total number of pedestrians in the simulation. This was done without taking into account that some pedestrians weren't even near the road or that the counted pedestrians were already counted.
This became an even bigger problem after the waiting zone was introduced. It allowed for an even bigger gap between the total number of people and the actual number of people crossing the road or near the road.

\subsubsection{Implementation}
The implementation is done by counting the number of pedestrians per cycle and using that as denominator for calculating the percentages. Every pedestrian approaching the road will be counted towards the total of the current cycle. A new cycle starts whenever the pedestrians' traffic light goes red.

\subsection{etc}
..

\clearpage

\section{Simulation}
\subsection{Setup}
The figures we are interested in are the actual amount of adaptive pedestrians that cross the road during a red light and the likeliness that they walk through a red light. During the simulation the following parameters will stay the same:
\begin{itemize}
\item Pedestrians: $40$
\item Cars: $15$
\item Pedestrian green time: $25$ ticks
\item Car green time: $50$ ticks
\end{itemize}
These values aren't based on any real world values, but turned out to exhibit behaviour that allows all implemented features to be used. If the pedestrians' light is red there are still gaps in the approaching cars for pedestrians to cross the road. Furthermore there are moments that only a few pedestrians are next to road and moments there are plenty allowing both influenced and uninfluenced probabilities of crossing. 

Each simulation will be run for $5000$ ticks. At the end the average percentage of adaptive walking through a red light and the average probability of the adaptive are recorded. The variables that are varied during the experiments are the police appearance probability and the effectiveness of the fine. For the police probability the values $25$, $50$, $75$ and $100$ will be chosen and for the fine $20$, $40$, $60$, $80$ and $100$.

\subsection{Results}
\begin{table}[H]
\centering
\begin{tabular}{ l | c c c c }
  Fine \slash Police Prob. & 25\% & 50\% & 75\% & 100\% \\ 
  \hline
  20\%  & 21.5 / 41.2 & 15.2 / 24.6 & 15.7 / 17.3 & 16.6 / 17.3  \\
  40\%  & 21.7 / 51.0 & 14.7 / 34.6 & 11.9 / 19.8 & 13.4 / 18.5  \\
  60\%  & 17.6 / 43.4 & 11.2 / 19.3 & 11.5 / 24.1 &  8.8 / 13.3  \\
  80\%  & 13.1 / 42.6 & 11.2 / 31.5 & 15.1 / 24.2 &  9.5 / 15.6  \\
  100\% & 10.1 / 45.7 & 15.4 / 27.2 &  7.3 / 24.2 &  6.7 / 16.3  \\
\end{tabular}
\caption{Results of the simulation, each cell contains two values, the first is the probability an adaptive walks through red and the second is the actual percentage of adaptive that walk through red.}
\end{table}
If we divide the average percentage of adaptive walking through red by their chance we can see how the chance corresponds to the actual measured value.

\begin{table}[H]
\centering
\begin{tabular}{ l | c c c c }
  Fine \slash Police Prob. & 25\% & 50\% & 75\% & 100\% \\ 
  \hline
  20\%  & 1.9 & 1.6 & 1.1 & 1.0  \\
  40\%  & 2.4 & 2.4 & 1.7 & 1.4  \\
  60\%  & 2.5 & 1.7 & 2.1 & 1.5  \\
  80\%  & 3.3 & 2.8 & 1.6 & 1.6  \\
  100\% & 4.5 & 1.8 & 3.3 & 2.4  \\
\end{tabular}
%\caption{... }
\end{table}

\clearpage

\section{Conclusion}
When looking at the result it becomes clear that increasing the effectiveness without increasing the police presence will reduce the chance of adaptive walking through red, but the actual percentage of those adaptive walking through red stays roughly the same. This is most likely due to peer pressure. Since getting caught is unlikely, but once you get caught it is effective, the probability will vary greatly among the adaptive. When an adaptive with a high probability walks through red it will increase the chance of all adaptives to do the same. An adaptive with an average probability crosses the road due to the first one and gives a boots to the other adaptive with a lower probability.

On the other hand, only increasing the police presence but not the effectiveness of the fine will bring the actual percentage of adaptive crossing closer to the average probability of the adaptive crossing. The probability of the adaptive crossing falls slightly when increasing the presence.

So increasing the fine results in a lower red walking chance, but leaves the actual percentage the same. Increasing the police presence lowers the actual percentage of red walking and leaves the chance roughly the same. One would assume that increasing both would result in the best possible outcome. But looking at the results that isn't the case...

\clearpage

\begin{thebibliography}{3}

	%\bibitem{name} description

\end{thebibliography}

\end{document}
